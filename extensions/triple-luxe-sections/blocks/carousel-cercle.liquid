{{ 'carousel-cercle.css' | asset_url | stylesheet_tag }}

<section class="circle-marquee"
  style="
    --cm-size: {{ block.settings.size }}px;
    --cm-gap: {{ block.settings.gap }}px;
    --cm-speed: {{ block.settings.speed }}s;
    --cm-border: {{ block.settings.border_width }}px;
    --cm-border-color: {{ block.settings.border_color }};">
  {% if block.settings.heading != blank %}
    <h2 class="cm-title">{{ block.settings.heading }}</h2>
  {% endif %}

  <div class="cm-viewport">
    <div class="cm-track">
      {% for i in (1..6) %}
        {% capture k_img %}image_{{ i }}{% endcapture %}
        {% capture k_alt %}alt_{{ i }}{% endcapture %}
        {% capture k_link %}link_{{ i }}{% endcapture %}
        {% assign img = block.settings[k_img] %}
        {% assign alt = block.settings[k_alt] %}
        {% assign lnk = block.settings[k_link] %}
        {% if img != blank %}
          <a {% if lnk != blank %}href="{{ lnk }}"{% endif %} class="cm-item" aria-label="{{ alt | escape }}">
            {{ img | image_url: width: 600 | image_tag: class: 'cm-img', alt: alt, loading: 'lazy' }}
          </a>
        {% endif %}
      {% endfor %}

      {% for i in (1..6) %}
        {% capture k_img %}image_{{ i }}{% endcapture %}
        {% capture k_alt %}alt_{{ i }}{% endcapture %}
        {% capture k_link %}link_{{ i }}{% endcapture %}
        {% assign img = block.settings[k_img] %}
        {% assign alt = block.settings[k_alt] %}
        {% assign lnk = block.settings[k_link] %}
        {% if img != blank %}
          <a {% if lnk != blank %}href="{{ lnk }}"{% endif %} class="cm-item" aria-label="{{ alt | escape }}">
            {{ img | image_url: width: 600 | image_tag: class: 'cm-img', alt: alt, loading: 'lazy' }}
          </a>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Carousel Cercle",
  "target": "section",
  "settings": [
    { "type": "text",  "id": "heading", "label": "Titre", "default": "Notre collection" },
    { "type": "range", "id": "size", "label": "Diamètre (px)", "min": 60, "max": 220, "step": 2, "default": 140 },
    { "type": "range", "id": "gap", "label": "Espace (px)", "min": 6, "max": 40, "step": 1, "default": 16 },
    { "type": "range", "id": "speed", "label": "Vitesse (s)", "min": 8, "max": 60, "step": 1, "default": 30 },
    { "type": "color", "id": "border_color", "label": "Couleur bordure", "default": "#ffd1e6" },
    { "type": "range", "id": "border_width", "label": "Épaisseur bordure (px)", "min": 0, "max": 6, "step": 1, "default": 2 },

    { "type": "image_picker", "id": "image_1", "label": "Image 1" },
    { "type": "text", "id": "alt_1", "label": "Alt 1", "default": "Image 1" },
    { "type": "url",  "id": "link_1", "label": "Lien 1" },

    { "type": "image_picker", "id": "image_2", "label": "Image 2" },
    { "type": "text", "id": "alt_2", "label": "Alt 2", "default": "Image 2" },
    { "type": "url",  "id": "link_2", "label": "Lien 2" },

    { "type": "image_picker", "id": "image_3", "label": "Image 3" },
    { "type": "text", "id": "alt_3", "label": "Alt 3", "default": "Image 3" },
    { "type": "url",  "id": "link_3", "label": "Lien 3" },

    { "type": "image_picker", "id": "image_4", "label": "Image 4" },
    { "type": "text", "id": "alt_4", "label": "Alt 4", "default": "Image 4" },
    { "type": "url",  "id": "link_4", "label": "Lien 4" },

    { "type": "image_picker", "id": "image_5", "label": "Image 5" },
    { "type": "text", "id": "alt_5", "label": "Alt 5", "default": "Image 5" },
    { "type": "url",  "id": "link_5", "label": "Lien 5" },

    { "type": "image_picker", "id": "image_6", "label": "Image 6" },
    { "type": "text", "id": "alt_6", "label": "Alt 6", "default": "Image 6" },
    { "type": "url",  "id": "link_6", "label": "Lien 6" }
  ]
}
{% endschema %}
