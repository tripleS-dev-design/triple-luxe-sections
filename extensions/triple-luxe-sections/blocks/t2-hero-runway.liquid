{% comment %}
Hero Runway — slider fade + slide, overlays à gauche/centre/droite
- 100% CSS, pas de snippets externes
- 3 à 5 slides (image, titre, sous-titre, bouton)
{% endcomment %}

<section id="runway-{{ section.id }}" class="runway"
  style="
    --rw-h: {{ section.settings.height }}px;
    --rw-dur: {{ section.settings.duration }}s;
    --rw-zoom: {{ section.settings.zoom | divided_by: 100.0 }};
    --rw-accent: {{ section.settings.accent }};
    --rw-from: {{ section.settings.bg_from }};
    --rw-to: {{ section.settings.bg_to }};
  "
  aria-label="Hero">
  <div class="rw-wrap">
    <div class="rw-viewport">
      <div class="rw-slides">
        {% assign per = section.settings.duration | divided_by: 3 %}
        {% for block in section.blocks %}
          {% if block.type == 'slide' %}
            <article class="rw-slide" style="--delay: {{ per | times: forloop.index0 }}s" {{ block.shopify_attributes }}>
              <div class="rw-ken">
                {% if block.settings.image != blank %}
                  {{ block.settings.image | image_url: width: 2400 | image_tag: class: 'rw-img', alt: block.settings.alt | default: block.settings.title | default: 'Visuel', loading: 'lazy' }}
                {% else %}
                  <img class="rw-img" alt="Hero" src="https://cdn.shopify.com/s/files/1/0000/0001/files/placeholder-1400x700.png?v=1">
                {% endif %}

                {% if block.settings.title or block.settings.subtitle or block.settings.button_label %}
                  <div class="rw-overlay rw-{{ block.settings.align }}">
                    {% if block.settings.badge != blank %}<span class="rw-badge">{{ block.settings.badge }}</span>{% endif %}
                    {% if block.settings.title %}<h2 class="rw-title">{{ block.settings.title }}</h2>{% endif %}
                    {% if block.settings.subtitle %}<p class="rw-sub">{{ block.settings.subtitle }}</p>{% endif %}
                    {% if block.settings.button_label and block.settings.link %}
                      <a class="rw-btn" href="{{ block.settings.link }}">{{ block.settings.button_label }}</a>
                    {% endif %}
                  </div>
                {% endif %}
              </div>
            </article>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<style>
.runway{background:linear-gradient(180deg,var(--rw-from,#fff),var(--rw-to,#fff)); padding:12px 0; border-bottom:1px solid rgba(0,0,0,.06)}
.rw-wrap{max-width:1200px; margin:0 auto; padding:0 12px}
.rw-viewport{position:relative; overflow:hidden; height:var(--rw-h,420px); border-radius:14px}
.rw-slides{position:relative; height:100%}
.rw-slide{position:absolute; inset:0; opacity:0; animation:rw-fade var(--rw-dur,15s) linear infinite; animation-delay:var(--delay,0s)}
@keyframes rw-fade{0%{opacity:0; transform:translateX(2%)} 6%{opacity:1; transform:translateX(0)} 33%{opacity:1} 39%{opacity:0; transform:translateX(-2%)} 100%{opacity:0}}
.rw-ken{position:relative; width:100%; height:100%; overflow:hidden; border-radius:inherit}
.rw-img{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; transform-origin:center; animation:rw-zoom var(--rw-dur,15s) ease-in-out infinite; animation-delay:var(--delay,0s)}
@keyframes rw-zoom{0%{transform:scale(1)} 100%{transform:scale(var(--rw-zoom,1.06))}}
.rw-overlay{position:absolute; inset:0; display:grid; align-content:center; gap:8px; padding:22px; pointer-events:none}
.rw-left{justify-items:start; text-align:left}
.rw-center{justify-items:center; text-align:center}
.rw-right{justify-items:end; text-align:right}
.rw-badge{display:inline-block; padding:6px 10px; border-radius:999px; background:rgba(225,29,72,.9); color:#fff; font-weight:800; letter-spacing:.3px; box-shadow:0 6px 16px rgba(225,29,72,.35); pointer-events:auto}
.rw-title{margin:4px 0 0; font-size:clamp(22px,3vw,34px); font-weight:900; color:#fff; text-shadow:0 2px 12px rgba(0,0,0,.35)}
.rw-sub{margin:0; color:#fff; opacity:.95}
.rw-btn{display:inline-block; margin-top:8px; padding:10px 16px; border-radius:999px; background:var(--rw-accent,#e11d48); color:#fff; text-decoration:none; font-weight:800; pointer-events:auto; box-shadow:0 0 0 2px rgba(255,255,255,.2) inset, 0 6px 14px rgba(225,29,72,.35)}
.rw-btn:hover{filter:brightness(1.06)}
@media (max-width: 900px){ .rw-viewport{height:calc(var(--rw-h,420px)*.78)} .rw-title{font-size:clamp(18px,4vw,28px)} }
</style>

{% schema %}
{
  "name": "T2 — Hero Runway (slider)",
  "settings": [
    { "type": "range", "id": "height", "label": "Hauteur", "min": 240, "max": 600, "step": 4, "default": 420 },
    { "type": "number", "id": "duration", "label": "Durée du cycle (s)", "default": 15 },
    { "type": "range", "id": "zoom", "label": "Zoom (100=1.0)", "min": 100, "max": 140, "step": 1, "default": 106 },
    { "type": "color", "id": "accent", "label": "Bouton (accent)", "default": "#e11d48" },
    { "type": "color", "id": "bg_from", "label": "Arrière-plan (haut)", "default": "#ffffff" },
    { "type": "color", "id": "bg_to", "label": "Arrière-plan (bas)", "default": "#fff5f7" }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "limit": 5,
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "text", "id": "alt", "label": "Alt", "default": "Visuel" },
        { "type": "text", "id": "badge", "label": "Badge (ex: -30%)", "default": "Nouveau" },
        { "type": "text", "id": "title", "label": "Titre", "default": "Nouvelle collection" },
        { "type": "text", "id": "subtitle", "label": "Sous-titre", "default": "Style & confort au quotidien" },
        { "type": "text", "id": "button_label", "label": "Texte bouton", "default": "Découvrir" },
        { "type": "url", "id": "link", "label": "Lien" },
        { "type": "select", "id": "align", "label": "Alignement du texte", "default": "left",
          "options": [ { "value": "left", "label": "Gauche" }, { "value": "center", "label": "Centre" }, { "value": "right", "label": "Droite" } ] }
      ]
    }
  ],
  "max_blocks": 5,
  "presets": [
    { "name": "T2 — Hero Runway (slider)", "blocks": [ { "type": "slide" }, { "type": "slide" }, { "type": "slide" } ] }
  ]
}
{% endschema %}
