{% comment %} Cart Recommended â€” show products from a collection on cart {% endcomment %}
{% if template.name != 'cart' %}
  <p style="padding:12px 16px;background:#fff3cd;border:1px solid #ffe69c;border-radius:8px">
    This block is intended for the <strong>cart</strong> template.
  </p>
{% endif %}

<section class="x-cart-recos" aria-label="Recommendations">
  {% assign coll = collections[section.settings.collection] %}
  {% if coll and coll.products_count > 0 %}
    <h2 class="t">{{ section.settings.title }}</h2>
    <div class="grid">
      {% for product in coll.products limit: section.settings.limit %}
        <a class="card" href="{{ product.url }}">
          {% assign img = product.featured_image %}
          {% if img %}
            {{ img
              | image_url: width: 1200
              | image_tag:
                alt: product.title,
                loading: 'lazy',
                widths: '240, 360, 480, 720, 940, 1200',
                sizes: '(min-width: 1000px) 220px, (min-width: 680px) 33vw, 90vw'
            }}
          {% endif %}
          <div class="n">{{ product.title }}</div>
          <div class="p">{{ product.price | money }}</div>
        </a>
      {% endfor %}
    </div>
  {% endif %}
</section>

<style>
.x-cart-recos{padding:24px 16px;max-width:1000px;margin:0 auto}
.x-cart-recos .t{font-size:22px;margin-bottom:10px}
.x-cart-recos .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
.card{display:block;background:#fff;border:1px solid #eee;border-radius:12px;overflow:hidden;text-decoration:none;color:inherit}
.card img{width:100%;display:block}
.card .n{padding:10px;font-weight:600}
.card .p{padding:0 10px 12px}
</style>

{% schema %}
{
  "name": "Cart Recommended",
  "target": "section",
  "settings": [
    { "type": "text", "id": "title", "label": "Title", "default": "Recommended for you" },
    { "type": "collection", "id": "collection", "label": "Collection" },
    { "type": "range", "id": "limit", "label": "Products count", "min": 2, "max": 8, "step": 1, "default": 4 }
  ]
}
{% endschema %}
