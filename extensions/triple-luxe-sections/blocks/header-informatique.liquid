
<section class="tlx-header-lite {% if block.settings.full_width %}tlx-header--full{% endif %}" style="--fg: {{ block.settings.fg }}; --bg: {{ block.settings.bg }}; --bd: {{ block.settings.bd }};">
  <div class="tlx-header-lite__inner">
    <!-- Logo -->
    <a class="tlx-logo" href="{{ routes.root_url }}" aria-label="{{ block.settings.store_name | escape }}">
      {% if block.settings.logo != blank %}
        {{ block.settings.logo | image_url: width: 220 | image_tag: alt: block.settings.store_name, class: 'tlx-logo__img' }}
      {% else %}
        <strong class="tlx-logo__text">{{ block.settings.store_name }}</strong>
      {% endif %}
    </a>

    <!-- Search -->
    {% if block.settings.show_search %}
    <form action="{{ routes.search_url }}" method="get" role="search" class="tlx-search" aria-label="Recherche produits">
      <input class="tlx-search__input" type="search" name="q" placeholder="{{ block.settings.search_ph | escape }}" />
      <input type="hidden" name="type" value="product">
      <button class="tlx-search__btn" type="submit" aria-label="Rechercher">
        <span aria-hidden="true">üîç</span>
      </button>
    </form>
    {% endif %}

    <!-- Utils -->
    <div class="tlx-utils">
      {% if block.settings.show_wishlist %}
        <a href="{{ block.settings.wishlist_url | default: routes.root_url }}" class="tlx-util">{{ block.settings.wishlist_label }}</a>
      {% endif %}
      {% if block.settings.show_compare %}
        <a href="{{ block.settings.compare_url | default: routes.root_url }}" class="tlx-util">{{ block.settings.compare_label }}</a>
      {% endif %}
      {% if block.settings.show_account and shop.customer_accounts_enabled %}
        <a href="{{ routes.account_url }}" class="tlx-util">{{ block.settings.account_label }}</a>
      {% endif %}
    </div>
  </div>

  <!-- Nav simple (jusqu'√† 4 liens) -->
  <nav class="tlx-nav" aria-label="Navigation">
    <ul class="tlx-nav__list">
      {% for i in (1..block.settings.links_count) %}
        {% assign k_label = 'l' | append: i | append: '_label' %}
        {% assign k_url   = 'l' | append: i | append: '_url'   %}
        {% assign label = block.settings[k_label] %}
        {% assign url   = block.settings[k_url]   %}
        {% if label != blank %}
          <li class="tlx-nav__item"><a href="{{ url | default: '#' }}">{{ label }}</a></li>
        {% endif %}
      {% endfor %}
    </ul>
  </nav>
</section>

<style>
  .tlx-header-lite{
    color:var(--fg,#111827);
    background:var(--bg,#ffffff);
    border-bottom:1px solid var(--bd,#e5e7eb)
  }
  /* Full-bleed quand "Pleine largeur" est activ√© */
  .tlx-header--full{
    width:100vw;
    position:relative;
    left:calc(50% - 50vw);
    right:calc(50% - 50vw);
  }

  /* TOP BAR ‚Äî Desktop */
  .tlx-header-lite__inner{
    max-width:{% if block.settings.full_width %}none{% else %}1200px{% endif %};
    width:100%;
    margin:{% if block.settings.full_width %}0{% else %}0 auto{% endif %};
    padding:8px 16px;                 /* padding r√©duit */
    display:grid;
    grid-template-columns:auto 1fr auto; /* logo auto, search fluide, utils auto */
    gap:12px;
    align-items:center
  }

  /* Logo vraiment petit et coll√© √† gauche */
  .tlx-logo{display:flex;align-items:center;text-decoration:none;color:inherit}
  .tlx-logo__img{max-height:48px; width:auto; display:block}   /* Desktop: 48px max */
  .tlx-logo__text{font-weight:700;font-size:16px;letter-spacing:.2px;white-space:nowrap}

  /* Search propre et compacte */
  .tlx-search{display:flex;min-width:0;border:1px solid var(--bd,#e5e7eb);background:#fff;border-radius:6px;overflow:hidden}
  .tlx-search__input{flex:1;min-width:0;padding:9px 10px;border:0;outline:0;font-size:14px}
  .tlx-search__btn{width:40px;border:0;background:#111827;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center}

  /* Utils √† droite */
  .tlx-utils{display:flex;gap:14px;justify-content:flex-end;align-items:center;min-width:0}
  .tlx-util{text-decoration:none;color:inherit;font-size:14px;white-space:nowrap}

  /* NAV ‚Äî Desktop */
  .tlx-nav{border-top:1px solid var(--bd,#e5e7eb);background:transparent}
  .tlx-nav__list{
    max-width:{% if block.settings.full_width %}none{% else %}1200px{% endif %};
    width:100%;
    margin:{% if block.settings.full_width %}0{% else %}0 auto{% endif %};
    padding:6px 16px;
    display:flex;
    gap:18px;
    list-style:none
  }
  .tlx-nav__item a{text-decoration:none;color:inherit;font-size:14px;line-height:1.6}

  /* MOBILE */
  @media (max-width: 990px){
    .tlx-header-lite__inner{
      grid-template-columns: auto 1fr auto; /* garde la m√™me logique mais compact */
      gap:8px;
      padding:6px 12px;
    }
    .tlx-logo__img{max-height:36px}          /* Mobile: 36px max */
    .tlx-logo__text{font-size:14px}

    .tlx-search__input{padding:8px 9px;font-size:13px}
    .tlx-search__btn{width:36px}

    .tlx-utils{gap:10px;justify-content:flex-end;flex-wrap:nowrap}
    .tlx-util{font-size:13px}

    /* Nav: ligne fine + scroll horizontal si trop de liens */
    .tlx-nav__list{
      padding:6px 12px;
      gap:14px;
      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none;
    }
    .tlx-nav__list::-webkit-scrollbar{display:none}
    .tlx-nav__item a{font-size:13px; line-height:1.4}
  }
</style>

{% schema %}
{
  "name": "TLX Header Lite",
  "target": "section",
  "settings": [
    { "type": "image_picker", "id": "logo", "label": "Logo" },
    { "type": "text", "id": "store_name", "label": "Nom (fallback)", "default": "Votre Boutique" },

    { "type": "checkbox", "id": "show_search", "label": "Afficher recherche", "default": true },
    { "type": "text", "id": "search_ph", "label": "Placeholder", "default": "Chercher des produits" },

    { "type": "range", "id": "links_count", "label": "Nombre de liens (0‚Äì4)", "min": 0, "max": 4, "step": 1, "default": 3 },

    { "type": "text", "id": "l1_label", "label": "Lien 1 ‚Äî Texte", "default": "Produits" },
    { "type": "url",  "id": "l1_url",   "label": "Lien 1 ‚Äî URL" },

    { "type": "text", "id": "l2_label", "label": "Lien 2 ‚Äî Texte", "default": "Promotions" },
    { "type": "url",  "id": "l2_url",   "label": "Lien 2 ‚Äî URL" },

    { "type": "text", "id": "l3_label", "label": "Lien 3 ‚Äî Texte", "default": "Blog" },
    { "type": "url",  "id": "l3_url",   "label": "Lien 3 ‚Äî URL" },

    { "type": "text", "id": "l4_label", "label": "Lien 4 ‚Äî Texte" },
    { "type": "url",  "id": "l4_url",   "label": "Lien 4 ‚Äî URL" },

    { "type": "checkbox", "id": "show_wishlist", "label": "Afficher Wishlist", "default": true },
    { "type": "url",      "id": "wishlist_url",  "label": "URL Wishlist" },
    { "type": "text",     "id": "wishlist_label","label": "Libell√© Wishlist", "default": "Wishlist" },

    { "type": "checkbox", "id": "show_compare",  "label": "Afficher Comparateur", "default": true },
    { "type": "url",      "id": "compare_url",   "label": "URL Comparateur" },
    { "type": "text",     "id": "compare_label", "label": "Libell√© Comparateur", "default": "Comparer" },

    { "type": "checkbox", "id": "show_account",  "label": "Afficher Compte (si activ√©)", "default": true },
    { "type": "text",     "id": "account_label", "label": "Libell√© Compte", "default": "Mon compte" },

    { "type": "checkbox", "id": "full_width", "label": "Pleine largeur", "default": true },

    { "type": "color", "id": "fg", "label": "Texte", "default": "#111827" },
    { "type": "color", "id": "bg", "label": "Fond",  "default": "#ffffff" },
    { "type": "color", "id": "bd", "label": "Bordure", "default": "#e5e7eb" }
  ]
}
{% endschema %}
