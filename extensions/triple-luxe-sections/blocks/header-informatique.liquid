<section class="tlx-header-lite {% if section.settings.full_width %}tlx-header--full{% endif %}"
  style="--fg: {{ section.settings.fg }}; --bg: {{ section.settings.bg }}; --bd: {{ section.settings.bd }};">
  <div class="tlx-header-lite__inner">
    <!-- Logo -->
    <a class="tlx-logo" href="{{ routes.root_url }}" aria-label="{{ section.settings.store_name | escape }}">
      {% if section.settings.logo != blank %}
        {{ section.settings.logo
          | image_url: width: 220
          | image_tag: alt: section.settings.store_name, class: 'tlx-logo__img' }}
      {% else %}
        <strong class="tlx-logo__text">{{ section.settings.store_name }}</strong>
      {% endif %}
    </a>

    <!-- Search -->
    {% if section.settings.show_search %}
    <form action="{{ routes.search_url }}" method="get" role="search" class="tlx-search" aria-label="Search products">
      <input class="tlx-search__input" type="search" name="q" placeholder="{{ section.settings.search_ph | escape }}" />
      <input type="hidden" name="type" value="product">
      <button class="tlx-search__btn" type="submit" aria-label="Search">
        <span aria-hidden="true">üîç</span>
      </button>
    </form>
    {% endif %}

    <!-- Utilities -->
    <div class="tlx-utils">
      {% if section.settings.show_wishlist %}
        <a href="{{ section.settings.wishlist_url | default: routes.root_url }}" class="tlx-util">{{ section.settings.wishlist_label }}</a>
      {% endif %}
      {% if section.settings.show_compare %}
        <a href="{{ section.settings.compare_url | default: routes.root_url }}" class="tlx-util">{{ section.settings.compare_label }}</a>
      {% endif %}
      {% if section.settings.show_account and shop.customer_accounts_enabled %}
        <a href="{{ routes.account_url }}" class="tlx-util">{{ section.settings.account_label }}</a>
      {% endif %}
    </div>
  </div>

  <!-- Simple nav (up to 4 links) -->
  <nav class="tlx-nav" aria-label="Navigation">
    <ul class="tlx-nav__list">
      {% for i in (1..section.settings.links_count) %}
        {% assign k_label = 'l' | append: i | append: '_label' %}
        {% assign k_url   = 'l' | append: i | append: '_url'   %}
        {% assign label = section.settings[k_label] %}
        {% assign url   = section.settings[k_url]   %}
        {% if label != blank %}
          <li class="tlx-nav__item"><a href="{{ url | default: '#' }}">{{ label }}</a></li>
        {% endif %}
      {% endfor %}
    </ul>
  </nav>
</section>

<style>
  .tlx-header-lite{
    color:var(--fg,#111827);
    background:var(--bg,#ffffff);
    border-bottom:1px solid var(--bd,#e5e7eb)
  }
  /* Full-bleed when "Full width" is enabled */
  .tlx-header--full{
    width:100vw;
    position:relative;
    left:calc(50% - 50vw);
    right:calc(50% - 50vw);
  }

  /* TOP BAR ‚Äî Desktop */
  .tlx-header-lite__inner{
    max-width:{% if section.settings.full_width %}none{% else %}1200px{% endif %};
    width:100%;
    margin:{% if section.settings.full_width %}0{% else %}0 auto{% endif %};
    padding:8px 16px;
    display:grid;
    grid-template-columns:auto 1fr auto; /* logo | search | utils */
    gap:12px;
    align-items:center
  }

  .tlx-logo{display:flex;align-items:center;text-decoration:none;color:inherit}
  .tlx-logo__img{max-height:48px;width:auto;display:block}
  .tlx-logo__text{font-weight:700;font-size:16px;letter-spacing:.2px;white-space:nowrap}

  /* Search */
  .tlx-search{display:flex;min-width:0;border:1px solid var(--bd,#e5e7eb);background:#fff;border-radius:6px;overflow:hidden}
  .tlx-search__input{flex:1;min-width:0;padding:9px 10px;border:0;outline:0;font-size:14px}
  .tlx-search__btn{width:40px;border:0;background:#111827;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center}

  /* Utils */
  .tlx-utils{display:flex;gap:14px;justify-content:flex-end;align-items:center;min-width:0}
  .tlx-util{text-decoration:none;color:inherit;font-size:14px;white-space:nowrap}

  /* NAV ‚Äî Desktop */
  .tlx-nav{border-top:1px solid var(--bd,#e5e7eb);background:transparent}
  .tlx-nav__list{
    max-width:{% if section.settings.full_width %}none{% else %}1200px{% endif %};
    width:100%;
    margin:{% if section.settings.full_width %}0{% else %}0 auto{% endif %};
    padding:6px 16px;
    display:flex;
    gap:18px;
    list-style:none
  }
  .tlx-nav__item a{text-decoration:none;color:inherit;font-size:14px;line-height:1.6}

  /* MOBILE */
  @media (max-width: 990px){
    .tlx-header-lite__inner{
      grid-template-columns:auto 1fr auto;
      gap:8px;
      padding:6px 12px;
    }
    .tlx-logo__img{max-height:36px}
    .tlx-logo__text{font-size:14px}

    .tlx-search__input{padding:8px 9px;font-size:13px}
    .tlx-search__btn{width:36px}

    .tlx-utils{gap:10px;justify-content:flex-end;flex-wrap:nowrap}
    .tlx-util{font-size:13px}

    /* Nav: thin line + horizontal scroll if many links */
    .tlx-nav__list{
      padding:6px 12px;
      gap:14px;
      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none;
    }
    .tlx-nav__list::-webkit-scrollbar{display:none}
    .tlx-nav__item a{font-size:13px;line-height:1.4}
  }
</style>

{% schema %}
{
  "name": "TLX Header Lite",
  "target": "section",
  "settings": [
    { "type": "image_picker", "id": "logo", "label": "Logo" },
    { "type": "text", "id": "store_name", "label": "Name (fallback)", "default": "Your Store" },

    { "type": "checkbox", "id": "show_search", "label": "Show search", "default": true },
    { "type": "text", "id": "search_ph", "label": "Search placeholder", "default": "Search products" },

    { "type": "range", "id": "links_count", "label": "Number of links (0‚Äì4)", "min": 0, "max": 4, "step": 1, "default": 3 },

    { "type": "text", "id": "l1_label", "label": "Link 1 ‚Äî Label", "default": "Products" },
    { "type": "url",  "id": "l1_url",   "label": "Link 1 ‚Äî URL" },

    { "type": "text", "id": "l2_label", "label": "Link 2 ‚Äî Label", "default": "Deals" },
    { "type": "url",  "id": "l2_url",   "label": "Link 2 ‚Äî URL" },

    { "type": "text", "id": "l3_label", "label": "Link 3 ‚Äî Label", "default": "Blog" },
    { "type": "url",  "id": "l3_url",   "label": "Link 3 ‚Äî URL" },

    { "type": "text", "id": "l4_label", "label": "Link 4 ‚Äî Label" },
    { "type": "url",  "id": "l4_url",   "label": "Link 4 ‚Äî URL" },

    { "type": "checkbox", "id": "show_wishlist", "label": "Show wishlist", "default": true },
    { "type": "url",      "id": "wishlist_url",  "label": "Wishlist URL" },
    { "type": "text",     "id": "wishlist_label","label": "Wishlist label", "default": "Wishlist" },

    { "type": "checkbox", "id": "show_compare",  "label": "Show compare", "default": true },
    { "type": "url",      "id": "compare_url",   "label": "Compare URL" },
    { "type": "text",     "id": "compare_label", "label": "Compare label", "default": "Compare" },

    { "type": "checkbox", "id": "show_account",  "label": "Show account (if enabled)", "default": true },
    { "type": "text",     "id": "account_label", "label": "Account label", "default": "Account" },

    { "type": "checkbox", "id": "full_width", "label": "Full width", "default": true },

    { "type": "color", "id": "fg", "label": "Text color", "default": "#111827" },
    { "type": "color", "id": "bg", "label": "Background", "default": "#ffffff" },
    { "type": "color", "id": "bd", "label": "Border", "default": "#e5e7eb" }
  ]
}
{% endschema %}
