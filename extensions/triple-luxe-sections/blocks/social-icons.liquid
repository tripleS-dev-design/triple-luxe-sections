{% comment %} Icônes sociaux — grille {% endcomment %}
<section id="si-{{ section.id }}" class="si"
  style="--si-bg: {{ section.settings.bg }}; --si-fg: {{ section.settings.fg }}; --si-accent: {{ section.settings.accent }}; --si-size: {{ section.settings.icon_size }}px; --si-gap: {{ section.settings.gap }}px; --si-radius: {{ section.settings.radius }}px;"
  aria-label="Réseaux sociaux">
  <div class="si-wrap">
    {% if section.settings.title != blank %}
      <header class="si-head" style="text-align: {{ section.settings.align }}">
        <h2 class="si-title">{{ section.settings.title }}</h2>
        {% if section.settings.subtitle != blank %}<p class="si-sub">{{ section.settings.subtitle }}</p>{% endif %}
      </header>
    {% endif %}

    <div class="si-row" style="justify-content: {% if section.settings.align == 'left' %}flex-start{% elsif section.settings.align == 'right' %}flex-end{% else %}center{% endif %};">
      {% for block in section.blocks %}
        {% if block.type == 'icon' and block.settings.url != blank %}
          {% assign brand = '#1a4a8a' %}
          {% case block.settings.platform %}
            {% when 'facebook'  %}{% assign brand = '#1877F2' %}
            {% when 'instagram' %}{% assign brand = '#E1306C' %}
            {% when 'reels'     %}{% assign brand = '#E1306C' %}
            {% when 'whatsapp'  %}{% assign brand = '#25D366' %}
            {% when 'tiktok'    %}{% assign brand = '#000000' %}
            {% when 'youtube'   %}{% assign brand = '#FF0000' %}
            {% when 'linkedin'  %}{% assign brand = '#0A66C2' %}
            {% when 'telegram'  %}{% assign brand = '#229ED9' %}
            {% when 'snapchat'  %}{% assign brand = '#FFFC00' %}
            {% when 'pinterest' %}{% assign brand = '#BD081C' %}
          {% endcase %}

          {% assign final_color = section.settings.icon_color %}
          {% if block.settings.use_brand %}{% assign final_color = brand %}{% endif %}
          {% if block.settings.custom_color != blank %}{% assign final_color = block.settings.custom_color %}{% endif %}

          <a class="si-item si-{{ section.settings.variant }}" href="{{ block.settings.url }}" target="_blank" rel="noopener noreferrer"
             aria-label="{{ block.settings.label | default: block.settings.platform | capitalize }}"
             style="--si-color: {{ final_color }};" {{ block.shopify_attributes }}>
            <span class="si-ico" aria-hidden="true">
              {% case block.settings.platform %}
                {% when 'facebook'  %}<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13 22v-8h2.6l.4-3H13V8.2c0-.9.3-1.5 1.6-1.5H16V4.1C15.7 4.1 14.8 4 13.9 4 11.6 4 10 5.4 10 7.9V11H7v3h3v8h3z"/></svg>
                {% when 'instagram' %}<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 3.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 0 1 12 5.5zM18 6.8a1.2 1.2 0 1 0 1.2 1.2A1.2 1.2 0 0 0 18 6.8z"/></svg>
                {% when 'reels'     %}<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7 3h10a4 4 0 0 1 4 4v10a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V7a4 4 0 0 1 4-4zm12 6H5v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9zM6.5 5l2 3h3l-2-3h-3zm6 0l2 3h3l-2-3h-3zM11 11.5l4 2.5-4 2.5v-5z"/></svg>
                {% when 'whatsapp'  %}<svg viewBox="0 0 24 24"><path fill="currentColor" d="M20 4.7A9.8 9.8 0 0 0 12.2 2 9.9 9.9 0 0 0 2 11.9a9.7 9.7 0 0 0 1.4 5.1L2 22l5.2-1.3a9.9 9.9 0 0 0 4.9 1.2h.1A9.9 9.9 0 0 0 22 11.9a9.8 9.8 0 0 0-2-7.2zm-7.8 15a8 8 0 0 1-4.1-1.1l-.3-.2-3.1.8.8-3-.2-.3a8 8 0 1 1 14.9-3.9 8 8 0 0 1-8 7.7z"/></svg>
                {% when 'tiktok'    %}<svg viewBox="0 0 24 24"><path fill="currentColor" d="M21 8.5a7.2 7.2 0 0 1-4.7-1.7v6.7a6 6 0 1 1-6-6 6.2 6.2 0 0 1 1.5.2v2.6a3.5 3.5 0 1 0 2.5 3.3V2h2.3a5 5 0 0 0 4.4 4.7V8.5z"/></svg>
                {% when 'youtube'   %}<svg viewBox="0 0 24 24"><path fill="currentColor" d="M23 12c0-2.2-.2-3.7-.5-4.5-.3-.8-1-1.5-1.8-1.8C18.8 5 12 5 12 5s-6.8 0-8.7.7c-.8.3-1.5 1-1.8 1.8C1.2 8.3 1 9.8 1 12s.2 3.7.5 4.5c.3.8 1 1.5 1.8 1.8C5.2 19 12 19 12 19s6.8 0 8.7-.7c.8-.3 1.5-1 1.8-1.8.3-.8.5-2.3.5-4.5zM9.8 8.8l5.8 3.2-5.8 3.2V8.8z"/></svg>
                {% when 'linkedin'  %}<svg viewBox="0 0 24 24"><path fill="currentColor" d="M6 9H3v12h3V9zm.3-6A1.8 1.8 0 1 0 6 6.6a1.8 1.8 0 0 0 .3-3.6zM21 21h-3v-6.7c0-3.6-4-3.4-4 0V21h-3V9h3v1.8c1.4-2.6 7-2.8 7 2.5V21z"/></svg>
                {% when 'telegram'  %}<svg viewBox="0 0 24 24"><path fill="currentColor" d="M9.1 15.6l-.3 4.4c.4 0 .6-.2.9-.4l2.1-1.9 4.3 3.2c.8.5 1.4.2 1.6-.7L22.9 4c.3-1-.4-1.5-1.2-1.2L2.2 10.5c-1 .4-1 1 .2 1.4l5.3 1.6 12.3-7.7-10.9 9.8z"/></svg>
                {% when 'snapchat'  %}<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 3c2.8 0 5 2.2 5 5 0 2.2-1.3 4-3.3 4.7-.1.4.1 1 .5 1.5.5.7 1.3 1.1 2.2 1.3.6.1.7.7.2 1.1-.7.5-1.6.7-2.5.7-.3 0-.6 0-.9-.1-.2.6-.7 1.2-1.4 1.6-.9.6-2 .9-3.1.9s-2.2-.3-3.1-.9c-.7-.4-1.2-1-1.4-1.6-.3.1-.6.1-.9.1-.9 0-1.8-.3-2.5-.7-.5-.4-.4-1 .2-1.1.9-.2 1.7-.6 2.2-1.3.4-.5.6-1.1.5-1.5C6.3 12 5 10.2 5 8c0-2.8 2.2-5 5-5z"/></svg>
                {% when 'pinterest' %}<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12.2 2a9.9 9.9 0 0 0-3.5 19.2c-.1-.8-.1-2 0-2.8l1.3-5.6s-.3-.6-.3-1.6c0-1.5.8-2.6 1.8-2.6.8 0 1.1.6 1.1 1.3 0 .8-.5 1.9-.8 3l-.6 2.5c.3.6 1.1 1.2 2 1.2 2.6 0 4.4-2.4 4.4-5.9 0-3.1-2.2-5.2-5.4-5.2-3.7 0-5.9 2.8-5.9 5.6 0 1.2.5 2.4 1.1 3.1.1.1.1.2.1.3l-.4 1.4c0 .2-.1.2-.2.1-1-.5-2-2-2-4.1 0-3 2.5-6.6 7.3-6.6 3.9 0 6.5 2.8 6.5 6.1 0 4-2.2 6.9-5.4 6.9-1.1 0-2.1-.6-2.4-1.3l-.7 2.6c-.2.9-.8 2-1.2 2.7.9.3 1.8.4 2.8.4a9.9 9.9 0 0 0 0-19.8z"/></svg>
              {% endcase %}
            </span>
            {% if section.settings.show_labels %}<span class="si-label">{{ block.settings.label | default: block.settings.platform | capitalize }}</span>{% endif %}
          </a>
        {% endif %}
      {% endfor %}
    </div>
  </div>

  <style>
    .si{background: var(--si-bg,#ffffff); color: var(--si-fg,#1f2937); padding: 20px 0}
    .si-wrap{max-width:1200px; margin:0 auto; padding:0 16px}
    .si-title{margin:0; font-size:clamp(18px,2.4vw,26px); font-weight:800}
    .si-sub{margin:6px 0 14px; color:#6b7280; font-size:14px}
    .si-row{display:flex; flex-wrap:wrap; gap: var(--si-gap,10px)}
    .si-item{--bg: transparent; --fg: var(--si-color,#1a4a8a); --bd: var(--si-color,#1a4a8a); display:inline-flex; flex-direction: {% if section.settings.show_labels %}column{% else %}row{% endif %}; align-items:center; justify-content:center; gap:6px; width: var(--si-size,44px); height: var(--si-size,44px); border-radius: var(--si-radius,999px); text-decoration:none; position:relative; color: var(--fg); background: var(--bg); border:1px solid var(--bd); box-shadow: 0 0 0 rgba(0,0,0,0); transition: transform .15s ease, box-shadow .2s ease, background .2s ease, color .2s ease, border-color .2s ease}
    .si-ico{display:grid; place-items:center}
    .si-ico svg{width: calc(var(--si-size,44px) * .54); height: calc(var(--si-size,44px) * .54)}
    .si-label{font-size:12px; font-weight:700; color:#374151}
    .si-solid{ --bg: var(--si-color); --fg:#fff; --bd: var(--si-color) }
    .si-outline{ --bg: transparent; --fg: var(--si-color); --bd: var(--si-color) }
    .si-ghost{ --bg: rgba(26,74,138,.06); --fg: var(--si-color); --bd: rgba(0,0,0,0) }
    .si-item:hover, .si-item:focus{transform: translateY(-1px); box-shadow: 0 0 18px rgba(110,193,255,.35), 0 0 0 1px var(--si-color); outline: none}
    {% if section.settings.show_labels %}.si-item{ width:auto; height:auto; padding:8px 10px; border-radius:12px }.si-ico svg{width:20px; height:20px}{% endif %}
  </style>

  {% schema %}
  {
    "name": "Icônes sociaux — Grille",
    "settings": [
      { "type": "text", "id": "title", "label": "Titre", "default": "Suivez-nous" },
      { "type": "text", "id": "subtitle", "label": "Sous-titre", "default": "Restez connectés sur nos réseaux" },
      { "type": "select", "id": "align", "label": "Alignement", "default": "center", "options": [ { "value": "left", "label": "Gauche" }, { "value": "center", "label": "Centre" }, { "value": "right", "label": "Droite" } ] },
      { "type": "checkbox", "id": "show_labels", "label": "Afficher les labels sous les icônes", "default": false },
      { "type": "select", "id": "variant", "label": "Style des icônes", "default": "solid", "options": [ { "value": "solid", "label": "Plein (solid)" }, { "value": "outline", "label": "Contour (outline)" }, { "value": "ghost", "label": "Léger (ghost)" } ] },
      { "type": "color", "id": "bg", "label": "Fond de la section", "default": "#ffffff" },
      { "type": "color", "id": "fg", "label": "Texte", "default": "#1f2937" },
      { "type": "color", "id": "accent", "label": "Couleur d’accent", "default": "#1a4a8a" },
      { "type": "color", "id": "icon_color", "label": "Couleur par défaut des icônes", "default": "#1a4a8a" },
      { "type": "number", "id": "icon_size", "label": "Taille des icônes (px)", "default": 44 },
      { "type": "number", "id": "gap", "label": "Espace entre icônes (px)", "default": 10 },
      { "type": "number", "id": "radius", "label": "Arrondi (px)", "default": 999 }
    ],
    "blocks": [
      { "type": "icon", "name": "Icône",
        "settings": [
          { "type": "select", "id": "platform", "label": "Plateforme", "default": "instagram",
            "options": [
              { "value": "facebook", "label": "Facebook" }, { "value": "instagram", "label": "Instagram" }, { "value": "reels", "label": "Instagram Reels" },
              { "value": "whatsapp", "label": "WhatsApp" }, { "value": "tiktok", "label": "TikTok" }, { "value": "youtube", "label": "YouTube" },
              { "value": "linkedin", "label": "LinkedIn" }, { "value": "telegram", "label": "Telegram" }, { "value": "snapchat", "label": "Snapchat" }, { "value": "pinterest", "label": "Pinterest" }
            ]
          },
          { "type": "url", "id": "url", "label": "Lien" },
          { "type": "text", "id": "label", "label": "Label (optionnel)", "default": "Suivre" },
          { "type": "checkbox", "id": "use_brand", "label": "Utiliser la couleur de marque", "default": true },
          { "type": "color", "id": "custom_color", "label": "Couleur personnalisée (si non marque)", "default": "#1a4a8a" }
        ]
      }
    ],
    "max_blocks": 12,
    "presets": [{ "name": "Icônes sociaux — Grille", "blocks": [ { "type": "icon", "settings": { "platform": "instagram" } }, { "type": "icon", "settings": { "platform": "reels" } }, { "type": "icon", "settings": { "platform": "facebook" } }, { "type": "icon", "settings": { "platform": "whatsapp" } }, { "type": "icon", "settings": { "platform": "youtube" } } ] }]
  }
  {% endschema %}
</section>
