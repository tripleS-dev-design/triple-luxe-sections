{% comment %} Recommended Products â€” uses Shopify recommendations {% endcomment %}
{% if template.name != 'product' %}
  <p style="padding:12px 16px;background:#fff3cd;border:1px solid #ffe69c;border-radius:8px">
    This section is intended for the <strong>product</strong> template.
  </p>
{% endif %}

<section class="x-recos" aria-label="Recommended products">
  {% if recommendations.performed and recommendations.products_count > 0 %}
    <h2 class="x-recos__title">{{ section.settings.title }}</h2>
    <div class="x-recos__grid">
      {% for product in recommendations.products limit: section.settings.limit %}
        <a class="x-reco" href="{{ product.url }}">
          {% assign img = product.featured_image %}
          {% if img %}
            {{ img
              | image_url: width: 1200
              | image_tag:
                alt: product.title,
                loading: 'lazy',
                widths: '165, 360, 533, 720, 940, 1200',
                sizes: '(min-width: 990px) 220px, 45vw'
            }}
          {% endif %}
          <div class="t">{{ product.title }}</div>
          <div class="p">{{ product.price | money }}</div>
        </a>
      {% endfor %}
    </div>
  {% endif %}
</section>

<style>
.x-recos{padding:24px 16px;max-width:1200px;margin:0 auto}
.x-recos__title{font-size:22px;margin-bottom:12px}
.x-recos__grid{display:grid;gap:18px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
.x-reco{display:block;background:#fff;border:1px solid #eee;border-radius:12px;overflow:hidden;text-decoration:none;color:inherit}
.x-reco img{width:100%;display:block}
.x-reco .t{padding:10px 10px 4px;font-weight:600}
.x-reco .p{padding:0 10px 12px;color:#0b1f3a}
</style>

{% schema %}
{
  "name": "Recommended Products",
  "target": "section",
  "settings": [
    { "type": "text", "id": "title", "label": "Title", "default": "You may also like" },
    { "type": "range", "id": "limit", "label": "Products count", "min": 2, "max": 8, "step": 1, "default": 4 }
  ]
}
{% endschema %}
